# kube-prometheus-stack: Prometheus + Grafana + Alertmanager (по 1 инстансу — локальный тест)
# Repo: prometheus-community/kube-prometheus-stack

# Prometheus — один инстанс
prometheus:
  prometheusSpec:
    replicas: 1
    retention: 15d
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: hostpath
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 20Gi

# Grafana — один инстанс
grafana:
  enabled: true
  replicaCount: 1
  adminPassword: admin  # сменить в проде!
  persistence:
    enabled: true
    size: 5Gi
  # ingress:
  #   enabled: true
  #   ingressClassName: nginx
  #   hosts:
  #     - grafana.asus.loc

# На локальных кластерах (Docker Desktop, kind) node-exporter падает из-за mount /
nodeExporter:
  enabled: false

# Alertmanager — один инстанс
alertmanager:
  enabled: true
  alertmanagerSpec:
    replicas: 1

defaultRules:
  create: true
